<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript">
var gl;
var shaderProgram;
var uPMatrix;
var vertexPositionBuffer;
var vertexColorBuffer;
var x = 0;
var y = -9;
let state =0;
function handlekeydown(e)
{
 if(e.keyCode==73) state = 1;
 if(e.keyCode==74) state = 2;
 if(e.keyCode==75) state = 3;
 if(e.keyCode==76) state = 4;
}

function startGL() 
{
  alert("StartGL");
  let canvas = document.getElementById("canvas3D"); //wyszukanie obiektu w strukturze strony 
  gl = canvas.getContext("experimental-webgl"); //pobranie kontekstu OpenGL'u z obiektu canvas
  gl.viewportWidth = canvas.width; //przypisanie wybranej przez nas rozdzielczości do systemu OpenGL
  gl.viewportHeight = canvas.height;
  
    //Kod shaderów
  const vertextShaderSource = ` //Znak akcentu z przycisku tyldy - na lewo od przycisku 1 na klawiaturze
    precision highp float;
    attribute vec3 aVertexPosition; 
    attribute vec3 aVertexColor;
    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    varying vec3 vColor;
    void main(void) {
      gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0); //Dokonanie transformacji położenia punktów z przestrzeni 3D do przestrzeni obrazu (2D)
      vColor = aVertexColor;
    }
  `;
  const fragmentShaderSource = `
    precision highp float;
    varying vec3 vColor;
    void main(void) {
      gl_FragColor = vec4(vColor,1.0); //Ustalenie stałego koloru wszystkich punktów sceny
    }
  `;
  let fragmentShader = gl.createShader(gl.FRAGMENT_SHADER); //Stworzenie obiektu shadera 
  let vertexShader   = gl.createShader(gl.VERTEX_SHADER);
  gl.shaderSource(fragmentShader, fragmentShaderSource); //Podpięcie źródła kodu shader
  gl.shaderSource(vertexShader, vertextShaderSource);
  gl.compileShader(fragmentShader); //Kompilacja kodu shader
  gl.compileShader(vertexShader);
  if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) { //Sprawdzenie ewentualnych błedów kompilacji
    alert(gl.getShaderInfoLog(fragmentShader));
    return null;
  }
  if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
    alert(gl.getShaderInfoLog(vertexShader));
    return null;
  }
  
  shaderProgram = gl.createProgram(); //Stworzenie obiektu programu 
  gl.attachShader(shaderProgram, vertexShader); //Podpięcie obu shaderów do naszego programu wykonywanego na karcie graficznej
  gl.attachShader(shaderProgram, fragmentShader);
  gl.linkProgram(shaderProgram);
  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) alert("Could not initialise shaders");  //Sprawdzenie ewentualnych błedów
  
  //Opis sceny 3D, położenie punktów w przestrzeni 3D w formacie X,Y,Z 
  let vertexPosition = [
0,0,0,0,1,0,1,0,0,1,1,0,0,1,0,1,0,0,
0,1,0,0,2,0,1,1,0,1,2,0,0,2,0,1,1,0,
0,2,0,0,3,0,1,2,0,1,3,0,0,3,0,1,2,0,
0,3,0,0,4,0,1,3,0,1,4,0,0,4,0,1,3,0,
0,4,0,0,5,0,1,4,0,1,5,0,0,5,0,1,4,0,
0,5,0,0,6,0,1,5,0,1,6,0,0,6,0,1,5,0,
0,6,0,0,7,0,1,6,0,1,7,0,0,7,0,1,6,0,
0,7,0,0,8,0,1,7,0,1,8,0,0,8,0,1,7,0,
0,8,0,0,9,0,1,8,0,1,9,0,0,9,0,1,8,0,
0,9,0,0,10,0,1,9,0,1,10,0,0,10,0,1,9,0,
0,10,0,0,11,0,1,10,0,1,11,0,0,11,0,1,10,0,
0,11,0,0,12,0,1,11,0,1,12,0,0,12,0,1,11,0,
1,0,0,1,1,0,2,0,0,2,1,0,1,1,0,2,0,0,
1,1,0,1,2,0,2,1,0,2,2,0,1,2,0,2,1,0,
1,2,0,1,3,0,2,2,0,2,3,0,1,3,0,2,2,0,
1,3,0,1,4,0,2,3,0,2,4,0,1,4,0,2,3,0,
1,4,0,1,5,0,2,4,0,2,5,0,1,5,0,2,4,0,
1,5,0,1,6,0,2,5,0,2,6,0,1,6,0,2,5,0,
1,6,0,1,7,0,2,6,0,2,7,0,1,7,0,2,6,0,
1,7,0,1,8,0,2,7,0,2,8,0,1,8,0,2,7,0,
1,8,0,1,9,0,2,8,0,2,9,0,1,9,0,2,8,0,
1,9,0,1,10,0,2,9,0,2,10,0,1,10,0,2,9,0,
1,10,0,1,11,0,2,10,0,2,11,0,1,11,0,2,10,0,
1,11,0,1,12,0,2,11,0,2,12,0,1,12,0,2,11,0,
2,0,0,2,1,0,3,0,0,3,1,0,2,1,0,3,0,0,
2,1,0,2,2,0,3,1,0,3,2,0,2,2,0,3,1,0,
2,2,0,2,3,0,3,2,0,3,3,0,2,3,0,3,2,0,
2,3,0,2,4,0,3,3,0,3,4,0,2,4,0,3,3,0,
2,4,0,2,5,0,3,4,0,3,5,0,2,5,0,3,4,0,
2,5,0,2,6,0,3,5,0,3,6,0,2,6,0,3,5,0,
2,6,0,2,7,0,3,6,0,3,7,0,2,7,0,3,6,0,
2,7,0,2,8,0,3,7,0,3,8,0,2,8,0,3,7,0,
2,8,0,2,9,0,3,8,0,3,9,0,2,9,0,3,8,0,
2,9,0,2,10,0,3,9,0,3,10,0,2,10,0,3,9,0,
2,10,0,2,11,0,3,10,0,3,11,0,2,11,0,3,10,0,
2,11,0,2,12,0,3,11,0,3,12,0,2,12,0,3,11,0,
3,0,0,3,1,0,4,0,0,4,1,0,3,1,0,4,0,0,
3,1,0,3,2,0,4,1,0,4,2,0,3,2,0,4,1,0,
3,2,0,3,3,0,4,2,0,4,3,0,3,3,0,4,2,0,
3,3,0,3,4,0,4,3,0,4,4,0,3,4,0,4,3,0,
3,4,0,3,5,0,4,4,0,4,5,0,3,5,0,4,4,0,
3,5,0,3,6,0,4,5,0,4,6,0,3,6,0,4,5,0,
3,6,0,3,7,0,4,6,0,4,7,0,3,7,0,4,6,0,
3,7,0,3,8,0,4,7,0,4,8,0,3,8,0,4,7,0,
3,8,0,3,9,0,4,8,0,4,9,0,3,9,0,4,8,0,
3,9,0,3,10,0,4,9,0,4,10,0,3,10,0,4,9,0,
3,10,0,3,11,0,4,10,0,4,11,0,3,11,0,4,10,0,
3,11,0,3,12,0,4,11,0,4,12,0,3,12,0,4,11,0,
4,0,0,4,1,0,5,0,0,5,1,0,4,1,0,5,0,0,
4,1,0,4,2,0,5,1,0,5,2,0,4,2,0,5,1,0,
4,2,0,4,3,0,5,2,0,5,3,0,4,3,0,5,2,0,
4,3,0,4,4,0,5,3,0,5,4,0,4,4,0,5,3,0,
4,4,0,4,5,0,5,4,0,5,5,0,4,5,0,5,4,0,
4,5,0,4,6,0,5,5,0,5,6,0,4,6,0,5,5,0,
4,6,0,4,7,0,5,6,0,5,7,0,4,7,0,5,6,0,
4,7,0,4,8,0,5,7,0,5,8,0,4,8,0,5,7,0,
4,8,0,4,9,0,5,8,0,5,9,0,4,9,0,5,8,0,
4,9,0,4,10,0,5,9,0,5,10,0,4,10,0,5,9,0,
4,10,0,4,11,0,5,10,0,5,11,0,4,11,0,5,10,0,
4,11,0,4,12,0,5,11,0,5,12,0,4,12,0,5,11,0,
5,0,0,5,1,0,6,0,0,6,1,0,5,1,0,6,0,0,
5,1,0,5,2,0,6,1,0,6,2,0,5,2,0,6,1,0,
5,2,0,5,3,0,6,2,0,6,3,0,5,3,0,6,2,0,
5,3,0,5,4,0,6,3,0,6,4,0,5,4,0,6,3,0,
5,4,0,5,5,0,6,4,0,6,5,0,5,5,0,6,4,0,
5,5,0,5,6,0,6,5,0,6,6,0,5,6,0,6,5,0,
5,6,0,5,7,0,6,6,0,6,7,0,5,7,0,6,6,0,
5,7,0,5,8,0,6,7,0,6,8,0,5,8,0,6,7,0,
5,8,0,5,9,0,6,8,0,6,9,0,5,9,0,6,8,0,
5,9,0,5,10,0,6,9,0,6,10,0,5,10,0,6,9,0,
5,10,0,5,11,0,6,10,0,6,11,0,5,11,0,6,10,0,
5,11,0,5,12,0,6,11,0,6,12,0,5,12,0,6,11,0,
6,0,0,6,1,0,7,0,0,7,1,0,6,1,0,7,0,0,
6,1,0,6,2,0,7,1,0,7,2,0,6,2,0,7,1,0,
6,2,0,6,3,0,7,2,0,7,3,0,6,3,0,7,2,0,
6,3,0,6,4,0,7,3,0,7,4,0,6,4,0,7,3,0,
6,4,0,6,5,0,7,4,0,7,5,0,6,5,0,7,4,0,
6,5,0,6,6,0,7,5,0,7,6,0,6,6,0,7,5,0,
6,6,0,6,7,0,7,6,0,7,7,0,6,7,0,7,6,0,
6,7,0,6,8,0,7,7,0,7,8,0,6,8,0,7,7,0,
6,8,0,6,9,0,7,8,0,7,9,0,6,9,0,7,8,0,
6,9,0,6,10,0,7,9,0,7,10,0,6,10,0,7,9,0,
6,10,0,6,11,0,7,10,0,7,11,0,6,11,0,7,10,0,
6,11,0,6,12,0,7,11,0,7,12,0,6,12,0,7,11,0,
7,0,0,7,1,0,8,0,0,8,1,0,7,1,0,8,0,0,
7,1,0,7,2,0,8,1,0,8,2,0,7,2,0,8,1,0,
7,2,0,7,3,0,8,2,0,8,3,0,7,3,0,8,2,0,
7,3,0,7,4,0,8,3,0,8,4,0,7,4,0,8,3,0,
7,4,0,7,5,0,8,4,0,8,5,0,7,5,0,8,4,0,
7,5,0,7,6,0,8,5,0,8,6,0,7,6,0,8,5,0,
7,6,0,7,7,0,8,6,0,8,7,0,7,7,0,8,6,0,
7,7,0,7,8,0,8,7,0,8,8,0,7,8,0,8,7,0,
7,8,0,7,9,0,8,8,0,8,9,0,7,9,0,8,8,0,
7,9,0,7,10,0,8,9,0,8,10,0,7,10,0,8,9,0,
7,10,0,7,11,0,8,10,0,8,11,0,7,11,0,8,10,0,
7,11,0,7,12,0,8,11,0,8,12,0,7,12,0,8,11,0,
8,0,0,8,1,0,9,0,0,9,1,0,8,1,0,9,0,0,
8,1,0,8,2,0,9,1,0,9,2,0,8,2,0,9,1,0,
8,2,0,8,3,0,9,2,0,9,3,0,8,3,0,9,2,0,
8,3,0,8,4,0,9,3,0,9,4,0,8,4,0,9,3,0,
8,4,0,8,5,0,9,4,0,9,5,0,8,5,0,9,4,0,
8,5,0,8,6,0,9,5,0,9,6,0,8,6,0,9,5,0,
8,6,0,8,7,0,9,6,0,9,7,0,8,7,0,9,6,0,
8,7,0,8,8,0,9,7,0,9,8,0,8,8,0,9,7,0,
8,8,0,8,9,0,9,8,0,9,9,0,8,9,0,9,8,0,
8,9,0,8,10,0,9,9,0,9,10,0,8,10,0,9,9,0,
8,10,0,8,11,0,9,10,0,9,11,0,8,11,0,9,10,0,
8,11,0,8,12,0,9,11,0,9,12,0,8,12,0,9,11,0,
9,0,0,9,1,0,10,0,0,10,1,0,9,1,0,10,0,0,
9,1,0,9,2,0,10,1,0,10,2,0,9,2,0,10,1,0,
9,2,0,9,3,0,10,2,0,10,3,0,9,3,0,10,2,0,
9,3,0,9,4,0,10,3,0,10,4,0,9,4,0,10,3,0,
9,4,0,9,5,0,10,4,0,10,5,0,9,5,0,10,4,0,
9,5,0,9,6,0,10,5,0,10,6,0,9,6,0,10,5,0,
9,6,0,9,7,0,10,6,0,10,7,0,9,7,0,10,6,0,
9,7,0,9,8,0,10,7,0,10,8,0,9,8,0,10,7,0,
9,8,0,9,9,0,10,8,0,10,9,0,9,9,0,10,8,0,
9,9,0,9,10,0,10,9,0,10,10,0,9,10,0,10,9,0,
9,10,0,9,11,0,10,10,0,10,11,0,9,11,0,10,10,0,
9,11,0,9,12,0,10,11,0,10,12,0,9,12,0,10,11,0,
10,0,0,10,1,0,11,0,0,11,1,0,10,1,0,11,0,0,
10,1,0,10,2,0,11,1,0,11,2,0,10,2,0,11,1,0,
10,2,0,10,3,0,11,2,0,11,3,0,10,3,0,11,2,0,
10,3,0,10,4,0,11,3,0,11,4,0,10,4,0,11,3,0,
10,4,0,10,5,0,11,4,0,11,5,0,10,5,0,11,4,0,
10,5,0,10,6,0,11,5,0,11,6,0,10,6,0,11,5,0,
10,6,0,10,7,0,11,6,0,11,7,0,10,7,0,11,6,0,
10,7,0,10,8,0,11,7,0,11,8,0,10,8,0,11,7,0,
10,8,0,10,9,0,11,8,0,11,9,0,10,9,0,11,8,0,
10,9,0,10,10,0,11,9,0,11,10,0,10,10,0,11,9,0,
10,10,0,10,11,0,11,10,0,11,11,0,10,11,0,11,10,0,
10,11,0,10,12,0,11,11,0,11,12,0,10,12,0,11,11,0,
11,0,0,11,1,0,12,0,0,12,1,0,11,1,0,12,0,0,
11,1,0,11,2,0,12,1,0,12,2,0,11,2,0,12,1,0,
11,2,0,11,3,0,12,2,0,12,3,0,11,3,0,12,2,0,
11,3,0,11,4,0,12,3,0,12,4,0,11,4,0,12,3,0,
11,4,0,11,5,0,12,4,0,12,5,0,11,5,0,12,4,0,
11,5,0,11,6,0,12,5,0,12,6,0,11,6,0,12,5,0,
11,6,0,11,7,0,12,6,0,12,7,0,11,7,0,12,6,0,
11,7,0,11,8,0,12,7,0,12,8,0,11,8,0,12,7,0,
11,8,0,11,9,0,12,8,0,12,9,0,11,9,0,12,8,0,
11,9,0,11,10,0,12,9,0,12,10,0,11,10,0,12,9,0,
11,10,0,11,11,0,12,10,0,12,11,0,11,11,0,12,10,0,
11,11,0,11,12,0,12,11,0,12,12,0,11,12,0,12,11,0
  ]
  
  vertexPositionBuffer = gl.createBuffer(); //Stworzenie tablicy w pamieci karty graficznej
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexPosition), gl.STATIC_DRAW);
  vertexPositionBuffer.itemSize = 3; //zdefiniowanie liczby współrzednych per wierzchołek
  vertexPositionBuffer.numItems = 288; //Zdefinoiowanie liczby punktów w naszym buforze
  
  //Opis sceny 3D, kolor każdego z wierzchołków
  let vertexColor = [
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0
  ]

 vertexColorBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexColorBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexColor), gl.STATIC_DRAW);
  vertexColorBuffer.itemSize = 3;
  vertexColorBuffer.numItems = 288;
  
  
  //Macierze opisujące położenie wirtualnej kamery w przestrzenie 3D
  let aspect = gl.viewportWidth/gl.viewportHeight;
  let fov = 45.0 * Math.PI / 180.0; //Określenie pola widzenia kamery
  let zFar = 100.0; //Ustalenie zakresów renderowania sceny 3D (od obiektu najbliższego zNear do najdalszego zFar)
  let zNear = 0.1;
  uPMatrix = [
   1.0/(aspect*Math.tan(fov/2)),0                           ,0                         ,0                            ,
   0                         ,1.0/(Math.tan(fov/2))         ,0                         ,0                            ,
   0                         ,0                           ,-(zFar+zNear)/(zFar-zNear)  , -1,
   0                         ,0                           ,-(2*zFar*zNear)/(zFar-zNear) ,0.0,
  ];
  Tick();
} 
let angle = 0; //Macierz transformacji świata - określenie położenia kamery

function Tick()
{
  let uMVMatrix = [
  Math.cos(angle*Math.PI/180.0),-Math.sin(angle*Math.PI/180.0),0,0, //Macierz Rotacji
  Math.sin(angle*Math.PI/180.0),Math.cos(angle*Math.PI/180.0),0,0,
  0,0,1,0.0,
  x,y,-2.5,1 //Położenie kamery
  ];
  //Render Scene
  if (state == 1) y=y-1;
  if (state == 2) x=x+1;
  if (state == 3) y=y+1;
  if (state == 4) x=x-1;
  gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight); 
  gl.clearColor(1.0,0.0,0.0,1.0); //Wyczyszczenie obrazu kolorem czerwonym
  gl.clearDepth(1.0);             //Wyczyścienie bufora głebi najdalszym planem
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
  gl.useProgram(shaderProgram)   //Użycie przygotowanego programu shaderowego
  
  gl.enable(gl.DEPTH_TEST);           // Włączenie testu głębi - obiekty bliższe mają przykrywać obiekty dalsze
  gl.depthFunc(gl.LEQUAL);            // 
  
  gl.uniformMatrix4fv(gl.getUniformLocation(shaderProgram, "uPMatrix"), false, new Float32Array(uPMatrix)); //Wgranie macierzy kamery do pamięci karty graficznej
  gl.uniformMatrix4fv(gl.getUniformLocation(shaderProgram, "uMVMatrix"), false, new Float32Array(uMVMatrix));
  
  gl.enableVertexAttribArray(gl.getAttribLocation(shaderProgram, "aVertexPosition"));  //Przekazanie położenia
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);
  gl.vertexAttribPointer(gl.getAttribLocation(shaderProgram, "aVertexPosition"), vertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);
  
  gl.enableVertexAttribArray(gl.getAttribLocation(shaderProgram, "aVertexColor"));  //Przekazanie kolorów
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexColorBuffer);
  gl.vertexAttribPointer(gl.getAttribLocation(shaderProgram, "aVertexColor"), vertexColorBuffer.itemSize, gl.FLOAT, false, 0, 0);
  
  gl.drawArrays(gl.TRIANGLES, 0, vertexPositionBuffer.numItems*vertexPositionBuffer.itemSize); //Faktyczne wywołanie rendrowania
  state=0;
  setTimeout(Tick,100);
}
</script>
</head>
<body onload="startGL()" onkeydown="handlekeydown(event)">
<canvas id="canvas3D" width="640" height="480" style="border: solid black 1px"></canvas>
</body>
</html>